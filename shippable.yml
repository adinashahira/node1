language: node_js

node_js:
  - 12.18.3

build:
  ci:
    - npm install --global ejs
    - npm install --global express
    - npm install --global mocha
    - npm install --global pm2
    - npm info ejs version
    - npm info express version
    - npm info mocha version
    - npm install
    - npm test
    - pm2 start index.js
  cache: true
  cache_dir_list:
    - $SHIPPABLE_BUILD_DIR/node_modules

env:
  - ENV1: "13.212.117.199"

integrations:
  hub:
    - integrationName: AWS EC2 Instance 1    #replace with your subscription integration name
      region: ap-southeast-1                   #replace with your AWS region
      type: ecr
